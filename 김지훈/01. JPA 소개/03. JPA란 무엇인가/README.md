# 1.3 JPA란 무엇인가?
- JPA(Java Persistence API)는 자바 진영의 ORM 기술 표준으로 애플리케이션과 JDBC 사이에서 동작.
- ORM (Object-Relational Mapping)은 이름 그대로 객체와 관계형 데이터베이스를 매핑한다는 뜻으로, 객체와 테이블을 매핑해 패러다임의 불일치 문제를 해결해준다. 예로, 객체를 마지 차자 컬렉션에 저장하듯이 ORM 프레임워크에
저장하면 된다. 그러면 ORM 프레임워크가 적절한 INSERT SQL 생성해 데이터베이스에 객체를 저장해 줌.
- JPA 객체 저장 코드는 
```java
jpa.persist(member);
```
- 조회 코드는
```java
Member member = jpa.find(memberId);
```
- ORM 프레임워크는 단순히 SQL 생성 뿐 아니라 패러다임 불일치 문제들도 해결해 줌. 따라서 객체 측면에서는 정교한 객체 모델링을 할 수 있고 관계형 데이터베이스는 데이터베이스에 맞도록 모델링 후 매핑 방법만 ORM 프레임워크에 알려주면 됨.
- 자바 진영에도 다양한 ORM 프레임워크들이 있는데 그 중 하이버네이트 프레임워크가 거의 대부분의 패러다임 불일치 문제를 해결해주는 성숙한 ORM 프레임워크

## 1.3.1 JPA 소개
- 과거 자바 진영 엔터프라이즈 자바 빈즈(EJB)는 엔티티 빈이라는 ORM 표준도 있었지만 너무 복잡하고 기술 성숙도도 떨어졌으며, J2EE 애플리케이션 서버에서만 동작했다. 이 때, 하이버네이트(hibernate.org)라는 오픈소스 ORM 프레임워크가 등장했는데, 가볍고 실용적, 기술 성숙도도 높았다. 그리고 자바 엔터프라이즈
애플리케이션 서버 없이도 동작해 많은 개발자가 상룡해 EJB 3.0에서 하이버네이트를 기반으로 새로운 자바 ORM 기술 표준이 만들어졌고, 이것이 바로 JPA.
- JPA를 사용하려면 구현한 ORM 프레임워크를 선택해야 하는데, 2.1 기준 구현한 ORM 프레임워크는 하이버네이트, EclipseLink, DataNucleus로, 하이버네이트가 가장 대중적.
- JPA라는 표준 덕분에 특정 구현 기술에 대한 의존도를 줄일 수 있고 다른 구현 기술로 손쉽게 이동 가능한 장점. JPA 표준은 일반적이고 공통적인 기능의 모음.
- JPA 버전별 특징
  - JPA 1.0 (JSR 220) 2006년 : 초기 버전. 복합 키와 연관관계 기능이 부족.
  - JPA 2.0 (JSR 317) 2009년 : 대부분의 ORM 기능을 포함하고 JPA Criteria가 추가됨.
  - JPA 2.1 (JSR 338) 2013년 : 스토어드 프로시저 접근, 컨버터 (Converter), 엔티티 그래프 기능 추가.

## 1.3.2 왜 JPA를 사용해야 하는가?
### 생산성
- 자바 컬렉션에 객체 저장하듯 JPA에게 저장할 객체를 전달하면 됨.
```java
jpa.persist(member); // 저장
Member member = jpa.find(memberId); // 조회
```
- CRUD용 SQL 작성 불필요. 추가로 DDL문도 자동 생성해 주는 기능 존재. 이런 기능들로 데이터베이스 설계 중심의 패러다임을 객체 설계 중심으로 역전 가능.

### 유지보수
- 필드 추가나 삭제시에도 수정해야 할 코드가 줄어든다. 개발자가 작성해야 했던 SQL, JDBC API 코드를 JPA가 대신 처리해주므로 유지보수해야 하는 코드 수가 줄어듦.
- 패러다임 불일치 문제 해결로, 객체지향 언어 장점을 이용해 유연하고 유지보수하기 좋은 도메인 모델을 편리하게 설계 가능.

### 패러다임의 불일치 해결
- JPA는 상속, 연관관계, 객체 그래프 탐색, 비교하기와 같은 패러다임의 불일치 문제를 해결해줌.

### 성능
- JPA는 애플리케이션과 데이터베이스 사이에서 다양한 성능 최적화 기회를 제공. JPA는 애플리케이션과 데이터베이스 사이에서 동작. 따라서 계층이 하나 더 있으면 최적화 관점에서 시도해 볼 수 있는 것들이 많음.
```java
String memberId = "helloId";
Member member1 = jpa.find(memberId);
Member member2 = jpa.find(memberId);
```
- 이것은 같은 트랜잭션 안에서 같은 회원을 두 번 조회하는 코드인데, JDBC API를 사용해 해당 코드를 직접 작성했다면, 회원을 조회할 때마다 SELECT SQL로 데이터베이스와 두 번 통신했을 것. JPA는 SELECT SQL을 한 번만 데이터베이스에 전달하고 두 번째는 조회한 회원 객체를 재사용.
- 참고로 하이버네이트는 SQL 힌트를 넣을 수 있는 기능도 제공.

### 데이터 접근 추상화와 벤더 독립성
- RDBMS는 같은 기능도 벤더마다 사용법이 다른 경우가 많다. 애플리케이션은 처음 선택한 데이터베이스 기술에 종속되고 다른 데이터베이스로 변경하기 매우 어렵.
- JPA는 애플리케이션과 데이터베이스 사이에 추상화된 데이터 접근 계층을 제공해 애플리케이션이 특정 데이터베이스 기술이 종속되지 않도록 함. 따라서 데이터베이스 변경시 JPA에게 다른 데이터베이스를 사용한다고 알려주기만 하면 됨.

### 표준
- JPA는 자바 진영의 ORM 기술 표준. 표준을 사용하면 다른 구현 기술로 손쉽게 변경 가능.
